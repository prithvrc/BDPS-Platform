<!DOCTYPE html>
<html>
<head>
  <title>Profile</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-black text-white">

<div class="flex h-screen max-w-7xl mx-auto">

  <!-- Sidebar -->
  <aside class="w-64 border-r border-gray-800 p-6 hidden md:block">
    <h1 class="text-2xl font-bold mb-10">SchoolHub</h1>

    <nav class="space-y-4">
      <a href="/feed" class="block text-lg hover:text-indigo-400">Home</a>
      <a href="/profile" class="block text-lg hover:text-indigo-400">Profile</a>

      <% if (user.role === "admin") { %>
        <a href="/admin" class="block text-lg hover:text-indigo-400">Admin</a>
      <% } %>

      <a href="/logout" class="block text-lg hover:text-indigo-400">Logout</a>
    </nav>
  </aside>

  <!-- Main -->
  <main class="flex-1 border-r border-gray-800 overflow-y-auto">

    <!-- Profile Header -->
    <div class="p-8 border-b border-gray-800">
      <div class="flex items-center space-x-6">
        <div class="w-20 h-20 bg-indigo-600 rounded-full flex items-center justify-center text-2xl font-bold">
          <%= profileUser.username.charAt(0).toUpperCase() %>
        </div>

        <div>
          <h2 class="text-3xl font-bold">
            <%= profileUser.username %>
          </h2>
          <p class="text-gray-500 mt-1">
            Community Member
          </p>
        </div>
      </div>
    </div>

    <!-- Posts -->
    <% posts.forEach(post => { %>

  <div class="p-6 border-b border-gray-800 hover:bg-gray-900 transition">

    <div class="flex justify-between mb-2">
      <span class="font-semibold text-indigo-400">
        <%= post.username %>
      </span>
      <span class="text-sm text-gray-500">
        <%= post.created_at %>
      </span>
    </div>

    <p class="text-gray-200 text-lg leading-relaxed">
      <%= post.content %>
    </p>

    <% if (post.user_id === user.id) { %>
      <form method="POST" action="/delete/<%= post.id %>" class="mt-3">
        <button class="text-sm text-red-500 hover:text-red-400">
          Delete
        </button>
      </form>
    <% } %>
    <% if (post.media) { %>
  <div class="mt-4">
    <% if (post.media.match(/\.(jpg|jpeg|png|gif|webp)$/i)) { %>
      <img src="/uploads/<%= post.media %>"
           class="rounded-xl max-h-96 object-cover">
    <% } else { %>
      <video controls class="rounded-xl max-h-96 w-full">
        <source src="/uploads/<%= post.media %>">
      </video>
    <% } %>
  </div>
<% } %>


  </div>

<% }) %>

    

  </main>
  

  <!-- Right Panel -->
  <aside class="w-80 p-6 hidden lg:block">
    <div class="bg-gray-900 rounded-2xl p-6">
      <h2 class="text-lg font-bold mb-4">About</h2>
      <p class="text-gray-400 text-sm">
        Private school community profile.
      </p>
    </div>
  </aside>

</div>

</body>
</html>
